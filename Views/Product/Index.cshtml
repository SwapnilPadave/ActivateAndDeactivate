@model List<CoreCurdApplicationWithRoleBased.Models.Product>

@{
    ViewData["Title"] = "Index";
    Layout = "~/Views/Shared/_Layout2.cshtml";
}

<h1>Products List..</h1>

<p>
    <a asp-action="Create">Create New</a>
</p>
<form class="form-inline" action="/Product/Index">
    <label for="serach">Search</label>
    <input type="search" class="form-control" id="search" name="search" placeholder="Search by Product Name" value="@ViewBag.search" />
    <button type="submit" class="btn btn-primary">Go</button>
</form>
<table class="table">
    <thead>
        <tr class="table-secondary">            
            <th style="width: 10%; background-color: cornflowerblue; border: thin; border-color: black">
                @if (ViewBag.IconClass == "fa-sort-desc")
                {
        <a href="/Product/index?SortColumn=ProductId&IconClass=fa-sort-asc&PageNo=1">Product Id</a> if (ViewBag.SortColumn == "ProductId")
        {
        <i class="fa @ViewBag.IconClass"></i> }
}
else
{
        <a href="/Product/index?SortColumn=ProductId&IconClass=fa-sort-desc&PageNo=1">Product ID</a> if (ViewBag.SortColumn == "ProductId")
        {
        <i class="fa @ViewBag.IconClass"></i>}
}
            </th>

            <th style="width: 20%; background-color: cornflowerblue; border: thin; border-color: black">

                @if (ViewBag.IconClass == "fa-sort-desc")
                {
        <a href="/Product/index?SortColumn=ProductName&IconClass=fa-sort-asc&PageNo=1">Product Name</a> if (ViewBag.SortColumn == "ProductName")
        {
        <i class="fa @ViewBag.IconClass"></i> }
}
else
{
        <a href="/Product/index?SortColumn=ProductName&IconClass=fa-sort-desc&PageNo=1">Product Name</a> if (ViewBag.SortColumn == "ProductName")
        {
        <i class="fa @ViewBag.IconClass"></i>}
}
            </th>
            <th style="width: 5%; background-color: cornflowerblue; border: thin; border-color: black">
                @if (ViewBag.IconClass == "fa-sort-desc")
                {
        <a href="/Product/index?SortColumn=Price&IconClass=fa-sort-asc&PageNo=1">Price</a> if (ViewBag.SortColumn == "Price")
        {
        <i class="fa @ViewBag.IconClass"></i> }
}
else
{
        <a href="/Product/index?SortColumn=Price&IconClass=fa-sort-desc&PageNo=1">Price</a> if (ViewBag.SortColumn == "Price")
        {
        <i class="fa @ViewBag.IconClass"></i>}
}

            </th>
            <th style="width: 12%; background-color: cornflowerblue; border: thin; border-color: black">

                @if (ViewBag.IconClass == "fa-sort-desc")
                {
        <a href="/Product/index?SortColumn=DateOfPurchase&IconClass=fa-sort-asc&PageNo=1">Date Of Purchase</a> if (ViewBag.SortColumn == "DateOfPurchase")
        {
        <i class="fa @ViewBag.IconClass"></i> }
}
else
{
        <a href="/Product/index?SortColumn=DateOfPurchase&IconClass=fa-sort-desc&PageNo=1">Date Of Purchase</a> if (ViewBag.SortColumn == "DateOfPurchase")
        {
        <i class="fa @ViewBag.IconClass"></i>}
}
            </th>
            <th style="width: 10%; background-color: cornflowerblue; border: thin; border-color: black">

                @if (ViewBag.IconClass == "fa-sort-desc")
                {
        <a href="/Product/index?SortColumn=AvailabilityStatus&IconClass=fa-sort-asc&PageNo=1">AvailabilityStatus</a> if (ViewBag.SortColumn == "AvailabilityStatus")
        {
        <i class="fa @ViewBag.IconClass"></i> }
}
else
{
        <a href="/Product/index?SortColumn=AvailabilityStatus&IconClass=fa-sort-desc&PageNo=1">AvailabilityStatus</a> if (ViewBag.SortColumn == "AvailabilityStatus")
        {
        <i class="fa @ViewBag.IconClass"></i>}
}
            </th>
            <th style="width: 10%; background-color: cornflowerblue; border: thin; border-color: black">

                @if (ViewBag.IconClass == "fa-sort-desc")
                {
        <a href="/Product/index?SortColumn=CategoryId&IconClass=fa-sort-asc&PageNo=1">Category</a> if (ViewBag.SortColumn == "CategoryId")
        {
        <i class="fa @ViewBag.IconClass"></i> }
}
else
{
        <a href="/Product/index?SortColumn=CategoryId&IconClass=fa-sort-desc&PageNo=1">Category</a> if (ViewBag.SortColumn == "CategoryId")
        {
        <i class="fa @ViewBag.IconClass"></i>}
}
            </th>
            <th style="width: 10%; background-color: cornflowerblue; border: thin; border-color: black">

                @if (ViewBag.IconClass == "fa-sort-desc")
                {
        <a href="/Product/index?SortColumn=BrandId&IconClass=fa-sort-asc&PageNo=1">Brand</a> if (ViewBag.SortColumn == "BrandId")
        {
        <i class="fa @ViewBag.IconClass"></i> }
}
else
{
        <a href="/Product/index?SortColumn=BrandId&IconClass=fa-sort-desc&PageNo=1">Brand</a> if (ViewBag.SortColumn == "BrandId")
        {
        <i class="fa @ViewBag.IconClass"></i>}
}
            </th>
            <th style="width: 10%; background-color: cornflowerblue; border: thin; border-color: black">

                @if (ViewBag.IconClass == "fa-sort-desc")
                {
        <a href="/Product/index?SortColumn=Active&IconClass=fa-sort-asc&PageNo=1">Active</a> if (ViewBag.SortColumn == "Active")
        {
        <i class="fa @ViewBag.IconClass"></i> }
}
else
{
        <a href="/Product/index?SortColumn=Active&IconClass=fa-sort-desc&PageNo=1">Active</a> if (ViewBag.SortColumn == "Active")
        {
        <i class="fa @ViewBag.IconClass"></i>}
}
            </th>
            <th style="width: 5%; background-color: cornflowerblue; border: thin; border-color: black">
                Quantity
            </th>            
            <th style="width: 5%; background-color: cornflowerblue; border: thin; border-color: black"> Book</th>
            <th style="width: 10%; background-color: cornflowerblue; border: thin; border-color: black">Action</th>
        </tr>
        
    </thead>
    <tbody>
        @foreach (var item in Model)
        {
        <tr>

            <td>@item.ProductId</td>
            <td>@item.ProductName</td>
            <td>@item.Price.ToString("C")</td>
            <td>@item.DateOfPurchase.ToString("d/M/yyyy")</td>
            <td>@item.AvailabilityStatus</td>
            <td>@item.Category.CategoryName</td>
            @*<td>@item.Brand.BrandName</td>*@
            <td>@item.Active</td>
            <td>@item.Quantity</td>
            <td> <a asp-action="Booking" asp-route-id="@item.ProductId" class="btn btn-sm">Book</a></td>
            <td>
                @*@Html.ActionLink("Booking Code", "Booking", "Product", new {  id = "@item.ProductId" })*@
                @*<a href="/Product/Booking/@item.ProductId" class="btn btn-success">Book Now</a>  |*@
                 |

                        @*<a href="/Product/Booking/@item.ProductId" class="btn btn-sm">Book</a>*@
                        <a href="/Product/Edit/@item.ProductId" class="btn btn-sm">Edit</a> |
                        <a href="/Product/delete/@item.ProductId" class="btn btn-sm">Delete</a>
            </td>
</tr>}
    </tbody>
</table>
